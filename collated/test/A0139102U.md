# A0139102U
###### \java\guitests\DeleteCompletedCommand.java
``` java
	@Test
	public void deleteCompleted() {
		
		TestTask[] currentList = td.getTypicalTasks();
		commandBox.runCommand("delete complete");
		
		// Remove completed tasks
		currentList = TestUtil.removeTasksFromList(currentList, td.CS2103_Lecture, td.BuyGroceries);
		assertDeleteCompleteSuccess(currentList);
	}

	private void assertDeleteCompleteSuccess(TestTask[] expectedRemainder) {
		assertTrue(taskListPanel.isListMatching(expectedRemainder));
	}
}
```
###### \java\guitests\EditCommandTest.java
``` java
	@Test
	public void edit() throws IllegalValueException {

		TestTask[] currentList = td.getTypicalTasks();
		int targetIndex = currentList.length;

		// edit task start
		String newStartTime = "s/today 10.15am";
		assertEditSuccess(targetIndex, currentList, newStartTime);

		// edit task end
		String newEndTime = "e/today 12.30pm";
		assertEditSuccess(targetIndex, currentList, newEndTime);
	}

	private void assertEditSuccess(int targetIndex, TestTask[] currentList, String arg) throws IllegalValueException {

		TestTask personToEdit = currentList[targetIndex - 1];
		char fieldToEdit = arg.charAt(0);
		int len = arg.length();
		String newField = arg.substring(2, len - 1);
		nattyParser np = new nattyParser();

		switch (fieldToEdit) {

		case 's':
			String newStartString = np.parse(newField);
			String[] sDateTimeArr = newStartString.split(" ");
			DateTime newStart = new DateTime(new Date(sDateTimeArr[0]), new Time(sDateTimeArr[1]));
			personToEdit.setStart(newStart);

		case 'e':
			String newEndString = np.parse(newField);
			String[] eDateTimeArr = newEndString.split(" ");
			DateTime newEnd = new DateTime(new Date(eDateTimeArr[0]), new Time(eDateTimeArr[1]));
			personToEdit.setStart(newEnd);

		}

		commandBox.runCommand("edit " + targetIndex + arg);
		TaskCardHandle editedCard = taskListPanel.navigateToPerson(personToEdit.getName());
		assertMatching(personToEdit, editedCard);
	}

}
```
###### \java\guitests\FindCommandTest.java
``` java
    @Test
    public void find_nonEmptyList() {
        assertFindResult("find bellydancing"); //no results
        assertFindResult("find CS2103", td.CS2103_Project, td.CS2103_Lecture); //multiple results

        //find after deleting one result
        commandBox.runCommand("delete 1");
        assertFindResult("find soccer", td.SoccerWithFriends);
    }

    @Test
    public void find_emptyList(){
        commandBox.runCommand("clear");
        assertFindResult("find homework"); //no results
    }

    @Test
    public void find_invalidCommand_fail() {
        commandBox.runCommand("find123");
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
    }

    private void assertFindResult(String command, TestTask... expectedHits ) {
        commandBox.runCommand(command);
        assertListSize(expectedHits.length);
        assertResultMessage(expectedHits.length + " tasks listed!");
        assertTrue(taskListPanel.isListMatching(expectedHits));
    }
}
```
###### \java\guitests\guihandles\CommandBoxHandle.java
``` java
    public static final String COMMAND_INPUT_FIELD_ID = "#commandTextField";

    public CommandBoxHandle(GuiRobot guiRobot, Stage primaryStage, String stageTitle) {
        super(guiRobot, primaryStage, stageTitle);
    }

    public void enterCommand(String command) {
        setTextField(COMMAND_INPUT_FIELD_ID, command);
    }

    public String getCommandInput() {
        return getTextFieldText(COMMAND_INPUT_FIELD_ID);
    }

    /**
     * Enters the given command in the Command Box and presses enter.
     */
    public void runCommand(String command) {
        enterCommand(command);
        pressEnter();
        guiRobot.sleep(500); //Give time for the command to take effect
    }

    public HelpWindowHandle runHelpCommand() {
        enterCommand("help");
        pressEnter();
        return new HelpWindowHandle(guiRobot, primaryStage);
    }
}
```
###### \java\guitests\guihandles\HelpWindowHandle.java
``` java
    public HelpWindowHandle(GuiRobot guiRobot, Stage primaryStage) {
        super(guiRobot, primaryStage, HELP_WINDOW_TITLE);
        guiRobot.sleep(1000);
    }

    public boolean isWindowOpen() {
        return getNode(HELP_WINDOW_ROOT_FIELD_ID) != null;
    }

    public void closeWindow() {
        super.closeWindow();
        guiRobot.sleep(500);
    }

}
```
###### \java\guitests\UndoCommandTest.java
``` java
	TestTask[] currentList = td.getTypicalTasks();

	@Test
	public void undo_add() {
		TestTask taskToAdd = td.learnSpanish;
		commandBox.runCommand(taskToAdd.getAddCommand());
		commandBox.runCommand("undo");
		assertUndoAddDeleteSuccess();
	}

	@Test
	public void undo_delete() {
		TestTask taskToDelete = td.CS2103_Project;
		commandBox.runCommand("delete 1");
		commandBox.runCommand("undo");
		assertUndoAddDeleteSuccess();
	}

	@Test
	public void undo_edit() {
		TestTask taskToEdit = td.CS2103_Project;
		commandBox.runCommand("edit 1 s/next year");
		commandBox.runCommand("undo");
		assertEditSuccess(taskToEdit);
	}

	private void assertEditSuccess(TestTask taskToEdit) {
		TaskCardHandle editedCard = taskListPanel.navigateToPerson(taskToEdit.getName());
		assertMatching(taskToEdit, editedCard);
	}

	@Test
	public void undo_pin() {
		TestTask taskToPin = td.MA1101R_Homework;
		commandBox.runCommand("pin 3");
		commandBox.runCommand("undo");
		int expectedPinBoardLength = 0;
		assertUndoPinSuccess(expectedPinBoardLength);
	}

	@Test
	public void undo_unpin() {
		commandBox.runCommand("pin 5");
		TestTask taskToUnpin = td.BuyGroceries;
		commandBox.runCommand("unpin 1");
		commandBox.runCommand("undo");
		int expectedPinBoardLength = 1;
		assertUndoPinSuccess(expectedPinBoardLength);
	}

	@Test
	public void undo_complete() {
		TestTask taskToComplete = td.CS2103_Project;
		boolean originalCompletionStatus = taskToComplete.isComplete();
		commandBox.runCommand("complete 1");
		commandBox.runCommand("undo");
		assertUndoCompleteSuccess(taskToComplete, originalCompletionStatus);
	}

	@Test
	public void undo_uncomplete() {
		TestTask taskToUncomplete = td.CS2103_Lecture;
		boolean originalCompletionStatus = taskToUncomplete.isComplete();
		commandBox.runCommand("uncomplete 2");
		commandBox.runCommand("undo");
		assertUndoCompleteSuccess(taskToUncomplete, originalCompletionStatus);
	}

	private void assertUndoCompleteSuccess(TestTask taskToCheck, boolean originalCompletionStatus) {
		TaskCardHandle resultCard = taskListPanel.navigateToPerson(taskToCheck.getName());
		if (originalCompletionStatus) {
			assertEquals("Task is complete", resultCard.getCompletion(), "COMPLETE");
		} else {
			 assertTrue(!resultCard.getCompletion().equals("COMPLETE"));
		}
	}

	private void assertUndoAddDeleteSuccess() {
		assertTrue(taskListPanel.isListMatching(currentList));
	}

	private void assertUndoPinSuccess(int expectedPinBoardLength) {
		assertEquals(pinnedListPanel.getNumberOfPeople(), expectedPinBoardLength);

	}

}
```
###### \java\guitests\UnpinCommandTest.java
``` java
	@Test
	public void unpin() {

		TestTask[] currentList = td.getTypicalTasks();
		TestTask taskToUnpin = td.CS2103_Project;
		
		commandBox.runCommand("pin 1");
		assertUnpinSuccess("unpin 1", taskToUnpin);

	}

	private void assertUnpinSuccess(String command, TestTask taskToUnpin) {

		commandBox.runCommand(command);

		// confirm there is now no tasks in the pinned list
		assertEquals(pinnedListPanel.getNumberOfPeople(), 0);
	}
}
```
###### \java\seedu\testplanner\testutil\TestTask.java
``` java
    public String getAddCommand() {
        StringBuilder sb = new StringBuilder();
        sb.append("add " + this.getName());
        if (!this.getStart().toString().equals(""))
            sb.append(" s/" + this.getStart().toString());
        if (!this.getEnd().toString().equals(""))
            sb.append(" e/" + this.getEnd().toString());
        if (!this.getTags().toSet().isEmpty())
            this.getTags().getInternalList().stream().forEach(s -> sb.append(" c/" + s.tagName));
        return sb.toString();
    }

    public Task asTask() {
        return new Task(name, start, end, isComplete, isPinned, tags);
    }

	@Override
	public String toString() {
		return getAsText();
	}

}
```
